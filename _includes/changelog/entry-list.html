
<!-- This page formats the list of changelog entries for the changelog (/docs/changelog) -->

{% assign changelog-entries = site.changelog | where:"content-type","changelog-entry" | sort:"date" | reverse %}

{% include misc/data-files.html %}

<ul class="changelog">
	{% for entry in changelog-entries %}
		{% assign entry-id = entry.date | date: "%F" | append: "-" | append: entry.title | slugify %}

		{% assign entry-type = site.data.changelog.types.type | where:"name",entry.entry-type | first %}

		<li class="changelog-entry changelog-entry--{{ entry.entry-type }}">
			<div class="changelog-entry-metadata">
				{{ entry.date | date: "%b %e, %Y" | upcase }}
				<br>
				<strong class="changelog-entry-type">
					{{ entry-type.display_name | upcase }}
				</strong>
			</div>

			<dl class="changelog-entry-details">
				<dt class="anchored" id="{{ entry-id }}">
					<strong>
						{{ entry.title }}
					</strong>
				</dt>

				<dd>
					{{ entry.content | flatify | markdownify }}

					<strong>Tags:</strong>

				<!-- Entry type button -->
					{% assign item-link = link.changelog.archive-by-type | prepend: site.baseurl | append: "#" | append: entry.entry-type %}
					{% assign item-display-text =  entry-type.display_name %}

					{{ site.data.changelog.metadata.archive-button | flatify }}

				<!-- Entry category button -->
					{% assign entry-category = site.data.changelog.categories.category | where:"name",entry.entry-category | first %}
					{% assign item-link = link.changelog.archive-by-category | prepend: site.baseurl | append: "#" | append: entry.entry-category %}
					{% assign item-display-text =  entry-category.display_name %}

					{{ site.data.changelog.metadata.archive-button | flatify }}
				</dd>
			</dl>
		</li>
		{% unless forloop.last == true %}
			<hr style="margin-top: 0">
		{% endunless %}
	{% endfor %}
</ul>