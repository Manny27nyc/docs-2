<!-- This file is an overview table of an connection's version
release and deprecation dates -->

<!-- Used to generate the "Unsupported" icons -->
{% include misc/icons.html %}
{% include misc/data-files.html %}

<!-- The logic for pulling version info is in this include -->
{% case page.connection-type %}
    {% when 'destination' %}
        {% include shared/versioning/destination-version-logic.html connection-type="destination" item-name="destination"  %}

        {% assign version-page-key = page.type | append: "-version-category" %}

    {% when 'integration' %}
        {% include shared/versioning/integration-version-logic.html connection-type="integration" item-name="integration" %}

        {% assign version-page-key = page.key %}

{% endcase %}

<p>
    All versions for Stitch's {{ page.display_name }} {{ page.connection-type }}, including release and deprecation dates.
</p>

<table class="attribute-list">
    <tr>
        <td width="25%; fixed" align="right">
            <strong>Version</strong>
        </td>
        <td>
            <strong>Status</strong>
        </td>
        <td>
            <strong>Release date</strong>
        </td>
        <td>
            <strong>Deprecation date</strong>
        </td>
        <td>
            <strong>End of life (Sunset)</strong>
        </td>
    </tr>
    {% for version in released-versions %}
    <!-- Get the category page specific to the version  -->
        {% assign version-pages = site[page.collection] | where:"key",version-page-key %}
            {% assign version-page = version-pages | find:"this-version",version.number %}

    <!-- Only display a row if there's a page that matches the current version -
        that is, that the page-version variable isn't nil -->
        {% if version-page %}
            <tr>
                <td width="25%; fixed" align="right">
                    <strong>
                        <a href="{{ version-page.url | prepend: site.baseurl }}">version {{ version.number }}</a>
                    </strong>
                    {% if version.number == latest-version %} (latest){% endif %}
                </td>

                <td class="attribute-description">
                    {{ version.status | capitalize }}
                </td>

                <td class="attribute-description">
                    {{ version.date-released }}
                </td>

                <td class="attribute-description">
                    {{ version.deprecation-date }}
                </td>
                <td>
                    {{ version.sunset-date }}
                </td>
            </tr>
        {% endif %}
    {% endfor %}
</table>