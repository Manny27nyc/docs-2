---
tap-reference: "xero"

version: "1.0"

foreign-keys:
  - id: "account-id"
    attribute: "AccountID"
    table: "accounts"
    join-on: "AccountID"
    all-foreign-keys:
      - table: "accounts"
      - table: "bank_transactions"
        subtable: "BankAccount"
      - table: "bank_transfers"
        subtable: "FromBankAccount"
      - table: "bank_transfers"
        subtable: "ToBankAccount"
      - table: "journals"
        subtable: "JournalLines"
      - table: "payments"
        subtable: "Account"

  - id: "bank-transfer-id"
    attribute: "BankTransferID"
    table: "bank_transfers"
    join-on: "BankTransferID"
    # all-foreign-keys:
    #   - table: "bank_transfers"

  - id: "bank-transaction-id"
    attribute: "BankTransactionID"
    table: "bank_transactions"
    join-on: "BankTransactionID"
    all-foreign-keys:
      - table: "bank_transactions"
      - table: "linked_transactions"
        join-on: "SourceTransactionID"

  - id: "branding-theme-id"
    attribute: "BrandingThemeID"
    table: "branding_themes"
    join-on: "BrandingThemeID"
    all-foreign-keys:
      - table: "branding_themes"
      - table: "contacts"
        subtable: "BrandingTheme"
      - table: "credit_notes"
      - table: "invoices"
      - table: "purchase_orders"
      - table: "repeating_invoices"

  - id: "contact-group-id"
    attribute: "ContactGroupID"
    table: "contact_groups"
    join-on: "ContactGroupID"
    all-foreign-keys:
      - table: "contact_groups"
      - table: "contacts"
        subtable: "ContactGroups"

  - id: "contact-id"
    attribute: "ContactID"
    table: "contacts"
    join-on: "ContactID"
    all-foreign-keys:
      - table: "contacts"
      - table: "credit_notes"
        subtable: "Contact"
      - table: "invoices"
        subtable: "Contact"
      - table: "linked_transactions"
      - table: "overpayments"
        subtable: "Contact"
      - table: "prepayments"
        subtable: "Contact"
      - table: "receipts"
        subtable: "Contact"
      - table: "repeating_invoices"
        subtable: "Contact"

  - id: "credit-note-id"
    attribute: "CreditNoteID"
    table: "credit_notes"
    join-on: "CreditNoteID"
    all-foreign-keys:
      - table: "credit_notes"
      - table: "invoices"
        subtable: "CreditNotes"

  - id: "currency-code"
    attribute: "CurrencyCode"
    table: "currencies"
    join-on: "Code"
    all-foreign-keys:
      - table: "accounts"
      - table: "bank_transactions"
      - table: "credit_notes"
      - table: "currencies"
      - table: "invoices"
      - table: "prepayments"
      - table: "purchase_orders"
      - table: "repeating_invoices"

  - id: "employee-id"
    attribute: "EmployeeID"
    table: "employees"
    join-on: "EmployeeID"
    # all-foreign-keys:
    #   - table: "employees"

  - id: "expense-claim-id"
    attribute: "ExpenseClaimID"
    table: "expense_claims"
    join-on: "ExpenseClaimID"
    # all-foreign-keys:
    #   - table: "expense_claims"

  - id: "invoice-id"
    attribute: "IvoiceID"
    table: "invoices"
    join-on: "InvoiceID"
    all-foreign-keys:
      - table: "invoices"
      - table: "linked_transactions"
        join-on: "SourceTransactionID"
      - table: "linked_transactions"
        join-on: "TargetTransactionID"
      - table: "overpayments"
        subtable: "Allocations"
        join-on: "Invoice__InvoiceID"
      - table: "payments"
        subtable: "Invoice"
      - table: "prepayments"
        subtable: "Allocations"
        join-on: "Invoice__InvoiceID"

  - id: "item-id"
    attribute: "ItemID"
    table: "items"
    join-on: "ItemID"
    # all-foreign-keys:
    #   - table: "items"

  - id: "journal-id"
    attribute: "JournalID"
    table: "journals"
    join-on: "JournalID"
    # all-foreign-keys:
    #   - table: "journals"

  - id: "linked-transaction-id"
    attribute: "LinkedTransactionID"
    table: "linked_transactions"
    join-on: "LinkedTransactionID"
    # all-foreign-keys:
    #   - table: ""

  - id: "manual-journal-id"
    attribute: "ManualJournalID"
    table: "manual_journals"
    join-on: "ManualJournalID"
    # all-foreign-keys:
    #   - table: "manial_journals"

  - id: "organisation-id"
    attribute: "OrganisationID"
    table: "organisations"
    join-on: "OrganisationID"
    # all-foreign-keys:
    #   - table: "organisations"

  - id: "overpayment-id"
    attribute: "OverpaymentID"
    table: "overpayments"
    join-on: "OverpaymentID"
    all-foreign-keys:
      - table: "bank_transactions"
      - table: "invoices"
        subtable: "Overpayments"
      - table: "overpayments"
      - table: "payments"
        subtable: "Overpayment"

  - id: "payment-id"
    attribute: "PaymentID"
    table: "payments"
    join-on: "PaymentID"
    all-foreign-keys:
      - table: "expense_claims"
        subtable: "Payments"
      - table: "invoices"
        subtable: "Payments"
      - table: "overpayments"
        subtable: "Payments"
      - table: "payments"

  - id: "prepayment-id"
    attribute: "PrepaymentID"
    table: "prepayments"
    join-on: "PrepaymentID"
    all-foreign-keys:
      - table: "bank_transactions"
      - table: "invoices"
        subtable: "Prepayments"
      - table: "payments"
        subtable: "Prepayments"
      - table: "prepayments"

  - id: "purchase-order-id"
    attribute: "PurchaseOrderID"
    table: "purchase_orders"
    join-on: "PurchaseOrderID"
    # all-foreign-keys:
    #   - table: "purchase_orders"

  - id: "receipt-id"
    attribute: "ReceiptID"
    table: "receipts"
    join-on: "ReceiptID"
    all-foreign-keys:
      - table: "expense_claims"
        subtable: "Receipts"
      - table: "receipts"

  - id: "repeating-invoice-id"
    attribute: "RepeatingInvoiceID"
    table: "repeating_invoices"
    join-on: "RepeatingInvoiceID"
    # all-foreign-keys:
    #   - table: ""

  - id: "source-transaction-id"
    attribute: "SourceTransactionID"
    table: "linked_transactions"
    join-on: "SourceTransactionID"
    all-foreign-keys:
      - table: "bank_transactions"
        join-on: "BankTransactionID"
      - table: "invoices"
        join-on: "InvoiceID"

  - id: "tax-name"
    attribute: "TaxName"
    table: "tax_rates"
    join-on: "TaxName"
    all-foreign-keys:
      - table: "tax_rates"
      - table: "journals"
        subtable: "JournalLines"

  - id: "tracking-category-id"
    attribute: "TrackingCategoryID"
    table: "tracking_categories"
    join-on: "TrackingCategoryID"
    all-foreign-keys:
      - table: "contacts"
        subtable: "SalesTrackingCategories"
      - table: "contacts"
        subtable: "PurchasesTrackingCategories"
      - table: "credit_notes"
        subtable: "LineItems__Tracking"
      - table: "invoices"
        subtable: "LineItems__Tracking"
      - table: "journals"
        subtable: "JournalLines__TrackingCategories"
      - table: "manual_journals"
        subtable: "JournalLines__TrackingCategories"
      - table: "overpayments"
        subtable: "LineItems__Tracking"
      - table: "prepayments"
        subtable: "LineItems__Tracking"
      - table: "purchase_orders"
        subtable: "LineItems__Tracking"
      - table: "receipts"
        subtable: "LineItems__Tracking"
      - table: "repeating_invoices"
        subtable: "LineItems__Tracking"
      - table: "tracking_categories"

  - id: "user-id"
    attribute: "UserID"
    table: "users"
    join-on: "UserID"
    all-foreign-keys:
      - table: "expense_claims"
        subtable: "User"
      - table: "receipts"
        subtable: "User"
---