---
# -------------------------- #
#     USING THIS TEMPLATE    #
# -------------------------- #

## NEED HELP USING THIS TEMPLATE? SEE:
## https://docs-about-stitch-docs.netlify.com/reference/integration-templates/saas-foreign-keys/
## FOR INSTRUCTIONS & REFERENCE INFO

tap-reference: "square"

version: "1"

foreign-keys:
  - id: "agent-id"
    table: "agents"
    attribute: "id"
    all-foreign-keys:
      - table: "agents"
        join-on: "id"
      - table: "groups"
        subattribute: "agent_ids"
        join-on: "value"  
      - table: "satisfaction_ratings"
        join-on: "agent_id"  

  - id: "group-id"
    table: "groups"
    attribute: "id"
    all-foreign-keys:
      - table: "agents"
        subattribute: "group_ids"
        join-on: "value"
      - table: "groups"
        join-on: "id"
      - table: "agents"
        join-on: "id"    
      - table: "groups"
        join-on: "id" 
      - table: "satisfaction_ratings"
        join-on: "group_id"   

  - id: "role-id"
    table: "roles"
    attribute: "id"
    all-foreign-keys:
      - table: "agents"
        subattribute: "role_ids"
        join-on: "value"
      - table: "roles"
        join-on: "id"  
        
  - id: "location-id"
    table: "locations"
    attribute: "id"
    all-foreign-keys:
      - table: "bank_accounts"
        join-on: "location_id"
      - table: "location"
        join-on: "id"
      - table: "discounts"
        subattribute: "absent_at_location_ids"
        join-on: "value"
      - table: "employees"
        subattribute: "location_ids"
        join-on: "value"   
      - table: "inventories"
        join-on: "location_id" 
      - table: "items"
        subattribute: "absent_at_location_ids"
        join-on: "value" 
      - table: "items"
        subattribute: "item_data.variations.item_variation_data.location_overrides"
        join-on: "location_id"  
      - table: "items"
        subattribute: "item_data.variations.item_variation_data.present_at_location_ids"
        join-on: "value" 
      - table: "items"
        subattribute: "present_at_location_ids"
        join-on: "value"
      - table: "modifier_lists"
        subattribute: "absent_at_location_ids"
        join-on: "value"  
      - table: "orders"
        subattribute: "item_data.variations.item_variation_data.item_variation_data.location_overrides"
        join-on: "location_id"  
      - table: "orders"
        join-on: "location_id" 
      - table: "orders"
        subattribute: "refunds"
        join-on: "location_id"    
      - table: "payments"
        join-on: "location_id"
      - table: "refunds"
        join-on: "location_id" 
      - table: "shifts"
        join-on: "location_id" 
      - table: "taxes"
        subattribute: "absent_at_location_ids"
        join-on: "value"    

  - id: "cash-drawer-id"
    table: "cash_drawer_shifts"
    attribute: "id"
    all-foreign-keys:
      - table: ""
        join-on: ""

  - id: "ticket-id"
    table: "tickets"
    attribute: "id"
    all-foreign-keys:
      - table: "tickets"
        join-on: "id"
      - table: "conversations"
        join-on: "ticket_id" 
      - table: "satisfaction_ratings"
        join-on: "ticket_id"    

  - id: "company-id"
    table: "companies"
    attribute: "id"
    all-foreign-keys:
      - table: "companies"
        join-on: "id"
      - table: "tickets"
        join-on: "company_id"   

  - id: "employee-id"
    table: "employees"
    attribute: "id"
    all-foreign-keys:
      - table: "employees"
        join-on: "id"
      - table: "shifts"
        join-on: "employee_id"  

  - id: "item-id"
    table: "items"
    attribute: "id"
    all-foreign-keys:
      - table: "items"
        join-on: "id"
      - table: "items"
        subattribute: "item_data.variations.item_variation_data"
        join-on: "item_id" 
      - table: "orders"
        subattribute: "item_data.variations.item_variation_data"
        join-on: "item_id"  

  - id: "tax-id"
    table: "taxes"
    attribute: "id"
    all-foreign-keys:
      - table: "taxes"
        join-on: "id"
      - table: "items"
        subattribute: "item_data.tax_ids"
        join-on: "value"  

  - id: "modifier-list-id"
    table: "modifier_lists"
    attribute: "id"
    all-foreign-keys:
      - table: "modifier_lists"
        join-on: "id"
      - table: "modifier_lists"
        subattribute: "modifier_list_data.modifiers.modifier_data"  

  - id: "order-id"
    table: "orders"
    attribute: "id"
    all-foreign-keys:
      - table: "orders"
        join-on: "id"
      - table: "orders"
        join-on: "order_id"
      - table: "payments"
        join-on: "order_id"  
      - table: "refunds"
        join-on: "order_id"     

  - id: "payment-id"
    table: "payments"
    attribute: "id"
    all-foreign-keys:
      - table: "payments"
        join-on: "id"
      - table: "orders"
        join-on: "payment_id"
      - table: "refunds"
        join-on: "payment_id"    

  - id: "refund-id"
    table: "refunds"
    attribute: "id"
    all-foreign-keys:
      - table: "refunds"
        join-on: "id"
      - table: "orders"
        subattribute: "refund_ids"
        join-on: "value"  
      - table: "orders"
        subattribute: "refunds"
        join-on: "id"  
      - table: "payments"
        join-on: "order_id"
      - table: "payments"
        subattribute: "refund_ids"
        join-on: "value"    

  - id: "bank-id"
    table: "bank_accounts"
    attribute: "id"
    all-foreign-keys:
      - table: "bank_accounts"
        join-on: "id"
      - table: "settlements"
        join-on: "bank_account_id"                                               
---