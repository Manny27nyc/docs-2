---
# -------------------------- #
#     USING THIS TEMPLATE    #
# -------------------------- #

## NEED HELP USING THIS TEMPLATE? SEE:
## https://docs-about-stitch-docs.netlify.com/reference/integration-templates/saas/
## FOR INSTRUCTIONS & REFERENCE INFO


# -------------------------- #
#      Page & Formatting     #
# -------------------------- #

title: Google Analytics 360
permalink: /integrations/saas/google-analytics-360
keywords: google-analytics-360, integration, schema, etl google-analytics-360, google-analytics-360 etl, google-analytics-360 schema
layout: singer
# input: false

key: "google-analytics-360-setup"


# -------------------------- #
#         Tap Details        #
# -------------------------- #

name: "google-analytics-360"
display_name: "Google Analytics 360"

singer: true
status-url: "https://www.google.com/appsstatus#hl=en&v=status"

tap-name: "Google Analytics 360"
repo-url: https://github.com/singer-io/tap-ga360

this-version: "1"

api: |
  [BigQuery API](https://cloud.google.com/bigquery/docs/reference/rest){:target="new"}


# -------------------------- #
#       Stitch Details       #
# -------------------------- #

certified: true

api-type: "platform.ga360"

historical: "1 year"
frequency: "1 hour"
tier: "Enterprise"

anchor-scheduling: true
cron-scheduling: true

extraction-logs: true
loading-reports: true

table-selection: true
column-selection: true

# attribution-window: "# days"
# attribution-is-configurable: 

# setup-name: ""


# -------------------------- #
#      Feature Summary       #
# -------------------------- #

feature-summary: |
  Stitch's {{ integration.display_name }} integration replicates data using the {{ integration.api | flatify | strip }}. Refer to the [Schema](#schema) section for a list of objects available for replication.


# -------------------------- #
#      Incompatibilities     #
# -------------------------- #

## uncomment section below if integration is compatible with any Stitch destinations
## if incompatible with multiple destinations, create a section for each destination

## incompatible:
  ## [redshift]: "always,sometimes,never"
  ## reason: "copy" 

# -------------------------- #
#      Setup Instructions    #
# -------------------------- #

requirements-list:
  - item: |
      **A Google BigQuery and {{ integration.display_name }} account**. You need to have your BigQuery account configured to export to {{ integration.display_name }}. To learn how to configure this export, use [Google's step-by-step instructions](https://support.google.com/analytics/answer/3416092?hl=en&ref_topic=3416089){:target="new"}.

setup-steps:
  - title: "Locate your Project ID and Dataset ID"
    anchor: "retrieve-project-dataset-ids"
    content: |
      1. Login to Google and go to your Google Cloud Console.
      2. To locate your list of projects, click on the navigation menu in the upper left-hand corner of the page.
      3. Hover over **IAM & Admin** to pop open its menu. Select **Manage Resources**.
      4. On this page, navigate to the project that includes the dataset you want to replicate data from and click on it.
      5. Your **Project ID** and all of your **Dataset IDs** will be visible. Make note of the Project ID and Dataset ID that you want to replicate and keep it readily available for the {{ integration.display_name }} integration configuration page.

  - title: "Create a GCP IAM service account"
    anchor: "create-gcp-iam-service-account"
    content: |
      {% for substep in step.substeps %}
      - [Step 2.{{ forloop.index }}: {{ substep.title }}](#{{ substep.anchor }})
      {% endfor %}

    substeps:
      - title: "Define the service account details"
        anchor: "define-service-account-details"
        content: |
          {% include destinations/google-bigquery/create-iam-service-account.html type="define-service-account-details" %}

      - title: "Assign service account permissions"
        anchor: "assign-service-account-permissions"
        content: |
          {% include destinations/google-bigquery/create-iam-service-account.html type="assign-bq-roles" %}

      - title: "Create a JSON project key"
        anchor: "create-json-project-key"
        content: |
          {% include destinations/google-bigquery/create-iam-service-account.html type="create-json-project-key" %}  
            
  - title: "add integration"
    content: |
      4. In the **GA 360 Dataset ID** and **GA 360 Project ID** fields, enter the Project and Dataset IDs you retrieved in [Step 1](#retrieve-project-dataset-ids).
      5. In the **Service Account JSON** field, paste the JSON project key you obtained in [Step 2.3](#create-gcp-iam-service-account).
  - title: "historical sync"
  - title: "replication frequency"
  - title: "track data" 


# -------------------------- #
#     Replication Details    #
# -------------------------- #

replication-sections:  
  - content: |
      While Stitch's {{ integration.display_name }} replicates the full tables for your dataset, tables are updated by the `ga_sessions_YYYYMMDD` non-field bookmark value. 

      Daily, Google creates an export file, `ga_sessions_YYYYMMDD`. The data in the `ga_sessions_YYYYMMDD`  will always be one day behind. For example, if you're looking at data on March 5, you will only see data up to March 4. Only when the table has complete data for the day, then it can be exported and then replicated by Stitch. Stitch's {{ integration.display_name }} will replicate your data when Google exports a `ga_sessions_YYYYMMDD` table with the `YYYYMMDD` date portion greater than the previous export. Allow 24 hours to see complete updates of your data.

      

# -------------------------- #
#     Integration Tables     #
# -------------------------- #

# Looking for the table schemas & info?
# Each table has a its own .md file in /_integration-schemas/ga360
---
{% assign integration = page %}
{% include misc/data-files.html %}